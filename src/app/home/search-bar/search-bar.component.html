<form id='car-search-bar' [formGroup]="searchForm" class="search-component" [class.is-expanded]="showLessOptions">
  <div class="main-search-row">
    <div class="search-input-box">
      <div class="icon-section">
        <img ngSrc="/assets/icons/home/search-bar/location_icon.svg" alt="input-location" height="24" width="24"/>
      </div>
      <div class="text-input-section">
        <label class="input-label">Pick up <span class="required-asterisk">*</span></label>
        <input type="text" placeholder="Enter pickup location" class="main-text-input" formControlName="pickupLocation">
      </div>
    </div>

    <div class="swap-icon-wrapper" (click)="swapLocations()">
      <img ngSrc="/assets/icons/home/search-bar/swap_horizontal_icon.svg" alt="swap-calendar" height="24" width="24"/>
    </div>

    <div class="search-input-box">
      <div class="icon-section">
        <img ngSrc="/assets/icons/home/search-bar/location_icon.svg" alt="dropoff-location" height="24" width="24"/>
      </div>
      <div class="text-input-section">
        <label class="input-label">Drop off <span class="required-asterisk">*</span></label>
        <input type="text" placeholder="Enter drop off location" class="main-text-input" formControlName="dropOffLocation">
      </div>
    </div>

    <div class="search-input-box date-time-box">
      <div class="icon-section">
        <img
          ngSrc="/assets/icons/home/search-bar/calendar_icon.svg"
          alt="Open Calendar"
          (click)="pickupDateInput.showPicker()"
          height="24" width="24"/>
      </div>
      <div class="text-input-section">
        <label class="input-label">Date <span class="required-asterisk">*</span></label>
        <input
          #pickupDateInput
          type="date"
          placeholder="DD/MM/YYYY"
          class="main-text-input date-input"
          formControlName="pickupDate"
        >
      </div>
    </div>

    <div class="search-input-box date-time-box">
      <div class="icon-section">
        <img
          ngSrc="/assets/icons/home/search-bar/clock_icon.svg"
          alt="Open Clock"
          (click)="pickupTimeInput.showPicker()"
          height="24" width="24"/>
      </div>
      <div class="text-input-section">
        <label class="input-label">Time <span class="required-asterisk">*</span></label>
        <input
          #pickupTimeInput
          type="time"
          placeholder="HH:MM"
          class="main-text-input time-input"
          formControlName="pickupTime"
        >
      </div>
    </div>

    <button type="submit" class="find-ride-btn" (click)="onFindRide()">
      Find your ride <svg viewBox="0 0 24 24"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/></svg>
    </button>
  </div>

  @if (showLessOptions) {
    <div class="secondary-options-row">
      <div class="radio-button-group">
        <label class="radio-segment">
          <input type="radio" value="oneWay" formControlName="tripType">
          <span>One way</span>
        </label>
        <label class="radio-segment">
          <input type="radio" value="roundTrip" formControlName="tripType">
          <span>Round trip</span>
        </label>
      </div>

      <div class="custom-dropdown-container">
          <span class="dropdown-icon">
            <img ngSrc="/assets/icons/home/search-bar/person_icon.svg" alt="person" height="24" width="24"/>
          </span>
        <select class="custom-select" formControlName="passengers">
          @for (num of passengersOptions; track num) {
            <option [ngValue]="num">{{ num }}</option>
          }
        </select>
        <span class="dropdown-arrow">
            <svg viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
          </span>
      </div>

      <div class="custom-dropdown-container">
          <span class="dropdown-icon">
            <img ngSrc="/assets/icons/home/search-bar/luggage_icon.svg" alt="luggage" height="24" width="24"/>
          </span>
        <select class="custom-select" formControlName="luggage">
          @for (num of luggageOptions; track num) {
            <option [ngValue]="num">{{ num }}</option>
          }
        </select>
        <span class="dropdown-arrow">
            <svg viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
          </span>
      </div>
    </div>
  }

  <div class="less-options-link" (click)="toggleLessOptions()">
    <svg viewBox="0 0 24 24"><path d="M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg>
    <span>{{ showLessOptions ? 'Less options' : 'More options' }}</span>
  </div>
</form>
